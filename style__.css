/* nstmyogyoji.org — minimal, accessible, mobile-first CSS */
:root{
  --bg:#fff; --ink:#0f172a; --ink-dim:#334155; --brand:#0b5; --brand-dark:#084; --muted:#f1f5f9;
  --maxw:1100px; --radius:10px;
}
*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{margin:0;font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu; color:var(--ink); background:var(--bg)}
a{color:var(--brand); text-decoration:none}
a:hover{color:var(--brand-dark); text-decoration:underline}
header,footer{background:var(--muted)}
.container{max-width:var(--maxw); margin:auto; padding:24px}
.nav{display:flex; gap:16px; flex-wrap:wrap; align-items:center}
.brand{font-weight:700; font-size:20px}
.nav a{padding:8px 10px; border-radius:6px}
.nav a[aria-current="page"]{background:#e2fbe2}
.hero{padding:64px 0; display:grid; gap:18px}
.hero h1{font-size:36px; line-height:1.15; margin:0}
.grid{display:grid; gap:18px}
.cards{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
.card{border:1px solid #e2e8f0; border-radius:var(--radius); padding:18px; background:#fff}
.card h3{margin:0 0 8px}
.cta{display:inline-block; padding:10px 16px; border-radius:8px; background:var(--brand); color:#fff; font-weight:600}
.cta:hover{background:var(--brand-dark); text-decoration:none}
section{padding:32px 0}
h1,h2{margin:0 0 12px}
.lead{color:var(--ink-dim)}
img{max-width:100%; height:auto; border-radius:8px}
figure{margin:0}
.notice{padding:12px 14px; background:#fffbeb; border:1px solid #fde68a; border-radius:8px}
footer p{margin:6px 0}
.kv{display:grid; grid-template-columns:1fr; gap:14px}
.kv div{padding:12px; background:#f8fafc; border-radius:8px}
form{display:grid; gap:12px; max-width:680px}
input,textarea,select{width:100%; padding:10px 12px; border:1px solid #cbd5e1; border-radius:8px}
label{font-weight:600}
table{width:100%; border-collapse:collapse}
th,td{padding:10px; border-bottom:1px solid #e5e7eb; text-align:left}
.badge{display:inline-block;padding:3px 8px;border-radius:999px;background:#eef2ff;color:#3730a3;font-size:12px}
.small{font-size:14px;color:var(--ink-dim)}
hr{border:0; border-top:1px solid #e5e7eb; margin:24px 0}

/* Google Doc / Drive frames */
.gdoc-frame{width:100%; min-height:600px; border:0; background:#fff; border-radius:10px; box-shadow:0 1px 2px rgba(0,0,0,.04)}
.gdoc-embed + .small{margin-top:8px}

/* responsive tweaks */
@media (min-width: 720px){
  .kv{grid-template-columns:1fr 1fr}
  .hero{grid-template-columns:1.2fr 1fr; align-items:center}
}

/* Chatbot widget — improved visuals & layering */
.chat-fab{
  position:fixed; right:18px; bottom:18px; width:56px; height:56px;
  border-radius:50%; border:0; background:var(--brand); color:#fff;
  font-size:24px; box-shadow:0 8px 24px rgba(0,0,0,.25); cursor:pointer;
  z-index: 99999;
}
.chat-fab[aria-expanded="true"]{ background:var(--brand-600); }

.chat-panel{
  position:fixed; right:18px; bottom:84px; width:380px; max-width:calc(100vw - 24px);
  background:var(--surface); border:1px solid var(--border); border-radius:12px;
  box-shadow:0 20px 48px rgba(0,0,0,.35); display:none; overflow:hidden; z-index: 99998;
}
.chat-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:12px 14px; background:color-mix(in srgb, var(--brand) 8%, transparent);
  border-bottom:1px solid var(--border); font-weight:800;
}
.status-dot{width:10px;height:10px;border-radius:50%}
.status-online{background:#22c55e; box-shadow:0 0 0 3px color-mix(in srgb, #22c55e 25%, transparent)}
.status-offline{background:#ef4444; box-shadow:0 0 0 3px color-mix(in srgb, #ef4444 25%, transparent)}
.chat-sub{font-size:12px;color:var(--ink-dim)}

.chat-body{height:420px; overflow:auto; padding:12px; background:var(--muted)}
.chat-row{display:flex; gap:8px; margin:10px 0}
.chat-row.user{justify-content:flex-end}
.avatar{
  width:28px;height:28px;border-radius:50%; display:flex; align-items:center; justify-content:center;
  background:#fff; border:1px solid var(--border); font-size:14px;
}
.bubble{
  padding:10px 12px; border-radius:12px; border:1px solid var(--border); max-width:78%; background:#fff;
}
.user .bubble{ background:color-mix(in srgb, var(--brand) 8%, #fff 92%) }
.meta{font-size:11px;color:var(--ink-dim); margin-top:4px}

.typing{display:inline-block; min-width:28px}
.typing span{
  display:inline-block; width:6px;height:6px;margin-right:3px;border-radius:50%;
  background:var(--ink-dim); opacity:.4; animation: blink 1.2s infinite;
}
.typing span:nth-child(2){animation-delay:.2s}
.typing span:nth-child(3){animation-delay:.4s}
@keyframes blink{0%,80%,100%{opacity:.2} 40%{opacity:1}}

.chat-foot{display:grid; gap:8px; padding:10px; border-top:1px solid var(--border); background:var(--surface)}
.chat-foot input, .chat-foot select{width:100%}
.chat-controls{display:grid; grid-template-columns:1fr auto; gap:8px}
/* nstmyogyoji.org — unified, accessible, mobile-first CSS
   Palette tuned to NST & nstmyogyoji.org look:
   - Primary Emerald: grounded, welcoming (brand)
   - Crimson & Gold: ceremonial accents
   - Slate ink for readability
*/

:root{
  /* Brand */
  --brand:#0b5f3b;        /* Emerald */
  --brand-600:#0a5132;
  --brand-700:#08442a;

  /* Accents (NST feel) */
  --accent-crimson:#8b1e2d;   /* banners, highlights */
  --accent-gold:#b28b00;      /* subtle accents / borders */

  /* Surface & text */
  --bg:#ffffff;
  --surface:#ffffff;
  --muted:#f5f7fb;
  --ink:#0f172a;           /* slate-900 */
  --ink-dim:#334155;       /* slate-600 */
  --border:#e5e7eb;

  --focus:#2563eb;         /* focus ring */
  --maxw:1100px;
  --radius:12px;
}

/* Dark mode */
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b1220;
    --surface:#101826;
    --muted:#0f1720;
    --ink:#e5e7eb;
    --ink-dim:#cbd5e1;
    --border:#233044;
    --brand:#16a34a;        /* brighter emerald in dark */
    --brand-600:#15803d;
    --brand-700:#166534;
    --accent-crimson:#ef4444;
    --accent-gold:#eab308;
  }
}

*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{margin:0;font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu; color:var(--ink); background:var(--bg)}
a{color:var(--brand); text-decoration:none}
a:hover{text-decoration:underline}
a.cta{text-decoration:none}

.skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip-link:focus{left:12px;top:12px;width:auto;height:auto;background:#fff;padding:8px 12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.2)}

header,footer{background:var(--muted)}
.container{max-width:var(--maxw); margin:auto; padding:24px}
.nav{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
.brand{font-weight:800; font-size:20px; letter-spacing:.2px}
.nav a{padding:8px 10px; border-radius:8px}
.nav a[aria-current="page"]{background:color-mix(in srgb, var(--brand) 10%, transparent); color:var(--brand-700)}

.hero{padding:64px 0; display:grid; gap:18px}
.hero h1{font-size:36px; line-height:1.15; margin:0}
.grid{display:grid; gap:18px}
.cards{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
.card{border:1px solid var(--border); border-radius:var(--radius); padding:18px; background:var(--surface)}
.card h3{margin:0 0 8px}

.cta{display:inline-block; padding:10px 16px; border-radius:999px; background:var(--brand); color:#fff; font-weight:700}
.cta:hover{background:var(--brand-600)}
.badge{display:inline-block;padding:3px 8px;border-radius:999px;background:color-mix(in srgb, var(--accent-gold) 18%, #fff 82%);color:var(--accent-crimson);font-size:12px;border:1px solid color-mix(in srgb, var(--accent-gold) 35%, #000 0%)}

section{padding:32px 0}
h1,h2{margin:0 0 12px}
.lead{color:var(--ink-dim)}

img{max-width:100%; height:auto; border-radius:10px}
figure{margin:0}
.notice{padding:12px 14px; background:color-mix(in srgb, var(--accent-gold) 12%, #fff 88%); border:1px solid color-mix(in srgb, var(--accent-gold) 48%, #000 0%); border-radius:10px}
footer p{margin:6px 0}

.kv{display:grid; grid-template-columns:1fr; gap:14px}
.kv div{padding:12px; background:color-mix(in srgb, var(--brand) 4%, var(--surface) 96%); border:1px solid var(--border); border-radius:10px}

form{display:grid; gap:12px; max-width:680px}
input,textarea,select{width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:10px; background:var(--surface); color:var(--ink)}
label{font-weight:700}
input:focus,textarea:focus,select:focus,.cta:focus{outline:3px solid color-mix(in srgb, var(--focus) 60%, transparent); outline-offset:2px; transition:.05s}

table{width:100%; border-collapse:collapse}
th,td{padding:10px; border-bottom:1px solid var(--border); text-align:left}

.small{font-size:14px;color:var(--ink-dim)}
hr{border:0; border-top:1px solid var(--border); margin:24px 0}

/* Google Doc / Drive iframes */
.gdoc-frame{width:100%; min-height:640px; border:0; background:#fff; border-radius:12px; box-shadow:0 1px 2px rgba(0,0,0,.06)}
.gdoc-embed + .small{margin-top:8px}

/* Temples map */
.map-wrap{position:relative; padding-top:56.25%; border-radius:12px; overflow:hidden; border:1px solid var(--border); background:var(--surface)}
.map-wrap iframe{position:absolute; top:0; left:0; width:100%; height:100%; border:0}

/* responsive */
@media (min-width: 720px){
  .kv{grid-template-columns:1fr 1fr}
  .hero{grid-template-columns:1.2fr 1fr; align-items:center}
}
/* Chatbot widget */
.chat-fab{position:fixed; right:18px; bottom:18px; width:56px; height:56px; border-radius:50%; border:0; background:var(--brand); color:#fff; font-size:24px; box-shadow:0 8px 24px rgba(0,0,0,.2); cursor:pointer}
.chat-fab:focus{outline:3px solid color-mix(in srgb, var(--focus) 60%, transparent)}

.chat-panel{position:fixed; right:18px; bottom:84px; width:360px; max-width:calc(100vw - 24px); background:var(--surface); border:1px solid var(--border); border-radius:12px; box-shadow:0 20px 40px rgba(0,0,0,.25); display:none; overflow:hidden}
.chat-head{padding:12px 14px; background:color-mix(in srgb, var(--brand) 8%, transparent); border-bottom:1px solid var(--border); font-weight:700}
.chat-body{height:360px; overflow:auto; padding:12px}
.chat-msg{margin:8px 0; display:flex; gap:8px}
.chat-msg .bubble{padding:10px 12px; border-radius:12px; border:1px solid var(--border); max-width:80%}
.chat-msg.user{justify-content:flex-end}
.chat-msg.user .bubble{background:color-mix(in srgb, var(--brand) 7%, #fff 93%)}
.chat-msg.bot .bubble{background:#fff}
.chat-foot{display:flex; gap:8px; padding:10px; border-top:1px solid var(--border); background:var(--muted)}
.chat-foot input{flex:1}

/* Chatbot widget — improved visuals & layering */
.chat-fab{
  position:fixed; right:18px; bottom:18px; width:56px; height:56px;
  border-radius:50%; border:0; background:var(--brand); color:#fff;
  font-size:24px; box-shadow:0 8px 24px rgba(0,0,0,.25); cursor:pointer;
  z-index: 99999;
}
.chat-fab[aria-expanded="true"]{ background:var(--brand-600); }

.chat-panel{
  position:fixed; right:18px; bottom:84px; width:380px; max-width:calc(100vw - 24px);
  background:var(--surface); border:1px solid var(--border); border-radius:12px;
  box-shadow:0 20px 48px rgba(0,0,0,.35); display:none; overflow:hidden; z-index: 99998;
}
.chat-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:12px 14px; background:color-mix(in srgb, var(--brand) 8%, transparent);
  border-bottom:1px solid var(--border); font-weight:800;
}
.status-dot{width:10px;height:10px;border-radius:50%}
.status-online{background:#22c55e; box-shadow:0 0 0 3px color-mix(in srgb, #22c55e 25%, transparent)}
.status-offline{background:#ef4444; box-shadow:0 0 0 3px color-mix(in srgb, #ef4444 25%, transparent)}
.chat-sub{font-size:12px;color:var(--ink-dim)}

.chat-body{height:420px; overflow:auto; padding:12px; background:var(--muted)}
.chat-row{display:flex; gap:8px; margin:10px 0}
.chat-row.user{justify-content:flex-end}
.avatar{
  width:28px;height:28px;border-radius:50%; display:flex; align-items:center; justify-content:center;
  background:#fff; border:1px solid var(--border); font-size:14px;
}
.bubble{
  padding:10px 12px; border-radius:12px; border:1px solid var(--border); max-width:78%; background:#fff;
}
.user .bubble{ background:color-mix(in srgb, var(--brand) 8%, #fff 92%) }
.meta{font-size:11px;color:var(--ink-dim); margin-top:4px}

.typing{display:inline-block; min-width:28px}
.typing span{
  display:inline-block; width:6px;height:6px;margin-right:3px;border-radius:50%;
  background:var(--ink-dim); opacity:.4; animation: blink 1.2s infinite;
}
.typing span:nth-child(2){animation-delay:.2s}
.typing span:nth-child(3){animation-delay:.4s}
@keyframes blink{0%,80%,100%{opacity:.2} 40%{opacity:1}}

.chat-foot{display:grid; gap:8px; padding:10px; border-top:1px solid var(--border); background:var(--surface)}
.chat-foot input, .chat-foot select{width:100%}
.chat-controls{display:grid; grid-template-columns:1fr auto; gap:8px}